<div class="chat-flex" [attr.data-state]="collapsed() ? 'closed' : 'open'">
  <app-sidebar
    [collapsed]="collapsed()"
    [activeId]="activeId()"
    (toggle)="collapsed.set($event)"
    (select)="onSelect($event)"
    (newClick)="onNewChat()"
    (newGroupChatClick)="onNewGroupChat()"
    (chatAction)="onChatAction($event)"
    (chatSelect)="onChatSelect($event)">
  </app-sidebar>

  <main class="chat-content">
    <router-outlet></router-outlet>
  </main>

  @if (showSearchModal()) {
    <app-search-chat (close)="onCloseSearchModal()"></app-search-chat>
  }

  @if (showProfileMenu()) {
    <app-event-options-menu 
      (close)="onCloseProfileMenu()"
      (optionSelected)="onProfileMenuOption($event)">
    </app-event-options-menu>
  }

  @if (showConfigModal()) {
    <app-configuration-modal (close)="onCloseConfigModal()"></app-configuration-modal>
  }

  @if (showLogoutModal()) {
    <app-logout-confirmation-modal 
      (close)="onCloseLogoutModal()"
      (confirm)="onConfirmLogout()">
    </app-logout-confirmation-modal>
  }

  @if (showGroupLinkModal() && currentGroupChat()) {
    <app-group-chat-link-modal
      [shareLink]="groupShareLink()"
      [groupChat]="currentGroupChat()"
      (onClose)="onCloseGroupLinkModal()">
    </app-group-chat-link-modal>
  }
</div>
