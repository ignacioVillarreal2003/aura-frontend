<div class="modal-overlay" (click)="onClose()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">
        <i class="pi pi-cog"></i>
        Configuración
      </h2>
      <button class="close-button" (click)="onClose()">
        <i class="pi pi-times"></i>
      </button>
    </div>

    <div class="modal-content">
      <div class="config-section">
        <h3 class="section-title">
          <i class="pi pi-lock"></i>
          Seguridad
        </h3>
        <div class="password-section">
          <div class="input-group">
            <label class="input-label">Contraseña actual</label>
            <div class="password-input-wrapper">
              <input [type]="showPasswords.current ? 'text' : 'password'" 
                     [(ngModel)]="passwordFields.current" 
                     class="input-field" 
                     placeholder="Ingresa tu contraseña actual">
              <button type="button" class="password-toggle" (click)="togglePasswordVisibility('current')">
                <i [class]="showPasswords.current ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
              </button>
            </div>
          </div>
          
          <div class="input-group">
            <label class="input-label">Nueva contraseña</label>
            <div class="password-input-wrapper">
              <input [type]="showPasswords.new ? 'text' : 'password'" 
                     [(ngModel)]="passwordFields.new" 
                     class="input-field" 
                     placeholder="Ingresa tu nueva contraseña">
              <button type="button" class="password-toggle" (click)="togglePasswordVisibility('new')">
                <i [class]="showPasswords.new ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
              </button>
            </div>
          </div>
          
          <div class="input-group">
            <label class="input-label">Confirmar nueva contraseña</label>
            <div class="password-input-wrapper">
              <input [type]="showPasswords.confirm ? 'text' : 'password'" 
                     [(ngModel)]="passwordFields.confirm" 
                     class="input-field" 
                     placeholder="Confirma tu nueva contraseña">
              <button type="button" class="password-toggle" (click)="togglePasswordVisibility('confirm')">
                <i [class]="showPasswords.confirm ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
              </button>
            </div>
          </div>
          
          <button class="change-password-btn" (click)="onPasswordChange()">
            <i class="pi pi-key"></i>
            Cambiar contraseña
          </button>
        </div>
      </div>

      <div class="config-section">
        <h3 class="section-title">
          <i class="pi pi-palette"></i>
          Apariencia
        </h3>
        <div class="theme-section">
          <div class="input-group">
            <label class="input-label">Tema</label>
            <select [(ngModel)]="settings.theme" class="select-field">
              @for (option of themeOptions; track option.value) {
                <option [value]="option.value">{{ option.label }}</option>
              }
            </select>
          </div>
        </div>
      </div>

      <div class="config-section">
        <h3 class="section-title">
          <i class="pi pi-bell"></i>
          Notificaciones
        </h3>
        <div class="notifications-section">
          <div class="toggle-item">
            <div class="toggle-info">
              <span class="toggle-label">Notificaciones por email</span>
              <span class="toggle-description">Recibir notificaciones importantes por correo</span>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" [(ngModel)]="settings.notifications.email" (change)="toggleNotification('email')">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>

      <div class="config-section">
        <h3 class="section-title">
          <i class="pi pi-shield"></i>
          Privacidad
        </h3>
        <div class="privacy-section">
          <div class="toggle-item">
            <div class="toggle-info">
              <span class="toggle-label">Permitir mensajes directos</span>
              <span class="toggle-description">Recibir mensajes de usuarios no contactados</span>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" [(ngModel)]="settings.privacy.allowDirectMessages" (change)="togglePrivacy('allowDirectMessages')">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="cancel-button" (click)="onCancel()">
        <i class="pi pi-times"></i>
        Cancelar
      </button>
      <button class="save-button" (click)="onSave()">
        <i class="pi pi-check"></i>
        Guardar cambios
      </button>
    </div>
  </div>
</div>
