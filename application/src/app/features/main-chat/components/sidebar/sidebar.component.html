<nav class="sidebar-nav"
     [class.open]="isOpen()"
     [class.closed]="!isOpen()"
     [attr.data-state]="isOpen() ? 'open' : 'closed'">

  @if (isOpen()) {
    <div class="toggle-button">
      <div class="toggle-button__container">
        <app-btn-icon
          size="medium"
          style="transparent"
          rounded="radius-normal"
          icon="chevron_left"
          (click)="onOpenClose()"
        ></app-btn-icon>
      </div>
    </div>
  }

  <div class="sidebar-header">
    <div class="sidebar-header__logo-container">
      <img [src]="isOpen() ? 'assets/images/logo-aura-prueba.png' : 'assets/images/logo.png'"
           [alt]="isOpen() ? 'AURA' : 'logo'"
           class="sidebar-logo"/>
    </div>
  </div>

  <div class="sidebar-divider"></div>

  <div class="sidebar-body">
    <div class="toggle-button">
      <div class="toggle-button__container">
        <app-btn-icon
          size="medium"
          rounded="radius-normal"
          [icon]="isOpen() ? 'chevron_left' : 'chevron_right'"
          [attr.aria-label]="isOpen() ? 'Cerrar sidebar' : 'Abrir sidebar'"
          (click)="onOpenClose()"
        ></app-btn-icon>
      </div>
    </div>

    <div class="items-row" (click)="emitNewClick()">
      <div class="items-row__icon">
        <i class="pi pi-plus"></i>
      </div>
      @if (isOpen()) {
        <app-btn-text class="items-row__btn" [label]="'Nuevo chat'" variant="ghost" colorScheme="auto" size="lg"></app-btn-text>
      }
    </div>

    <div class="items-row" [class.active]="activeId === 'search'" (click)="emitSelect('search')">
      <div class="items-row__icon">
        <i class="pi pi-search"></i>
      </div>
      @if (isOpen()) {
        <app-btn-text class="items-row__btn" [label]="'Buscar'" variant="ghost" colorScheme="auto" size="lg"></app-btn-text>
      }
    </div>

    @if (isOpen()) {
      @for (c of chats; track c.id) {
        <div class="items-row" [class.active]="activeId === c.id" (click)="emitSelect(c.id)">
          <div class="items-row__icon">
            <i class="pi pi-comments"></i>
          </div>
          <app-btn-text class="items-row__btn" [label]="c.title" variant="ghost" colorScheme="auto" size="lg"></app-btn-text>
        </div>
      }
    }
  </div>

  <div class="sidebar-footer">
    <div class="sidebar-divider"></div>

    <div class="items-row" [class.active]="activeId === 'profile'" (click)="emitSelect('profile')">
      <div class="items-row__icon">
        <div class="avatar-fallback">{{ userInitials() }}</div>
      </div>
      @if (isOpen()) {
        <div class="items-row__text">
          <span class="user-email">{{ userEmail() }}</span>
          <span class="user-meta">{{ userRol() }}</span>
        </div>
      }
    </div>
  </div>
</nav>
